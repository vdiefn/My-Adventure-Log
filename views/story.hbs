<div class="row" style="min-height:100vh">
  <div class="col-2" style="background-color:#303030;">
    {{> nav-left}}
  </div>


  <div class="col-10 d-flex justify-content-start" style="background-color:#202a3c;">
    <div class="col-3">
     
      <div class="container d-flex justify-content-start mt-3">
        <div class="row" style="width: 100%;">
          <div class="d-flex justify-content-start" style="width:100%;">
            <form class="d-flex" role="search" action="/searchStory">
              <input class="form-control me-2" type="search" placeholder="搜尋" aria-label="Search" name="keyword" value="{{keyword}}" style="width:100%; height:100%">
              <button class="btn btn-outline-secondary btn-sm" type="submit" style="width:50% height:50%">
                <i class="fa-solid fa-magnifying-glass" style="color: #ced6e3; "></i>
              </button>
            </form>
          </div>

          <div class="mt-3">
            <form action="/story" method="GET">
              <select name="filterYear" id="filterYear"
                style="width:150px; height:40px; border-radius:4%; border-color:#D9D9D9; padding-left: 10px;"
                onchange="this.form.submit()">
                <option selected disabled>-年份選擇-</option>
                <option value="all" {{#if filterYear }} selected {{/if}}>全部</option>
                <option value="2023" {{#if filterYear }} selected {{/if}}>2023</option>
                <option value="2022" {{#if filterYear }} selected {{/if}}>2022</option>
                <option value="2021" {{#if filterYear }} selected {{/if}}>2021</option>
              </select>
            </form>
          </div>
      
        </div>
      </div>

    </div>
    <div class="col-9 d-flex flex-column justify-content-start align-items-start" style="width: 50%; height:100%; margin-left:5%;">
      {{#each dives}}
      <div class="mt-3 mb-2" style="width:80%; height:500px; color:white;border:2px solid #C4C4C4;border-radius:4px;">
        <div class="d-flex justify-content-between align-items-center" style="border-bottom:2px solid #C4C4C4;">
          <h5 class="mt-2 ms-2" style="font-size:22px;">{{this.location}}</h5>
          <h6 class="mt-2 me-3" style="font-size:14px; color:#D4D4D4;">{{relativeTimeFromNow this.date}}</h6>
        </div>
        <div class="d-flex justify-content-start" style="width:100%;">
          
          {{#if this.image}}
          <div class="d-flex justify-content-center" style="width:100%;height:350px;">
            <a href="./dives/{{this._id}}">
            <img src="{{this.image}}" style="width:100%; height: 100%; object-fit:fill;">
            </a>
          </div>
          {{else}}
          <div class="d-flex justify-content-center" style="width:100%;">
            <a href="./dives/{{this._id}}">
            <img src="https://i.imgur.com/qoGgz0g.png" style="height:350px;">
            </a>
          </div>
          {{/if}} 
        </div>
        <div class="d-flex justify-content-around" style="border-top:2px solid #C4C4C4;">
          <div class="mt-3"> 
            <div class="ms-2">
              <h6 style="font-size:16px;">時長</h6>
            </div>
            <div>
              {{#if this.divingTime}}
              <h6 style="font-size:18px;">{{this.divingTime}}&nbsp;<span>min</span></h6>
              {{else}}
              <h6 style="font-size:18px;">--&nbsp;<span>min</span></h6>
              {{/if}}
            </div>
          </div>
          <div class="mt-3">
            <div>
              <h6 style="font-size:16px;">最大深度</h6>
            </div>
            <div class="ms-2">
              {{#if this.maxDepth}}
              <h6 style="font-size:18px;">{{this.maxDepth}}&nbsp;<span>m</span></h6>
              {{else}}
              <h6 style="font-size:18px;">--&nbsp;<span>m</span></h6>
              {{/if}}
            </div>
          </div>  
          <div class="mt-3">
            <div>
              <h6 style="font-size:16px;">水下溫度</h6>
            </div>
            <div class="ms-2">
              {{#if this.underwaterTemp}}
              <h6 style="font-size:18px;">{{this.underwaterTemp}}&nbsp;<span>℃</span></h6>
              {{else}}
              <h6 style="font-size:18px;">--&nbsp;<span>℃</span></h6>
              {{/if}}
            </div>
          </div>
        </div>  
      </div>
      
      {{/each}}
    </div>

    
  </div>

</div>
